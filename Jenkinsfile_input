pipeline {
    agent any
    
    stages {
        stage('Input') {
            steps {
                script {
                    def QUERY_RESULTS = [
                        ["ENV": "DEV", "IMAGE": "jdk8-slim", "VERSION": "1.0"],
                        ["ENV": "DEV", "IMAGE": "alpine", "VERSION": "1.2"],
                        ["ENV": "DEV", "IMAGE": "buster", "VERSION": "1.6.2"]
                    ]
                    
                    // Create a list of image names and versions
                    def imageList = QUERY_RESULTS.collect { it.IMAGE }
                    def versionList = QUERY_RESULTS.collect { it.VERSION }
                    
                    // Input step for selecting an image
                    def selectedImage = input(
                        id: 'selectImage',
                        message: 'Select an image:',
                        parameters: [choice(name: 'IMAGE', choices: imageList, description: 'Choose an image')]
                    )
                    
                    // Input step for selecting a version
                    def selectedVersion = input(
                        id: 'selectVersion',
                        message: 'Select a version:',
                        parameters: [choice(name: 'VERSION', choices: versionList, description: 'Choose a version')]
                    )
                    
                    echo "Selected Image: ${selectedImage.IMAGE}"
                    echo "Selected Version: ${selectedVersion.VERSION}"
                }
            }
        }
        
        // Add more stages as needed for your pipeline
    }
}
